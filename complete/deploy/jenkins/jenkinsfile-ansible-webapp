node {
  stage('Init') {
    checkout scm
  }

  stage('Build') {
    sh '''
        cd complete
        mvn clean package
        mv target/*.war ROOT.war
    '''
  }

  stage('Deploy') {

    azureWebAppPublish azureCredentialsId: env.AZURE_CRED_ID,
                       resourceGroup: env.RES_GROUP, 
                       appName: env.WEB_APP_NAME, 
                       filePath: "ROOT.war"
  }
}
